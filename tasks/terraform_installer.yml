# Terraform Installer Task Template
#
# Wraps: TerraformInstaller@1 (Microsoft DevLabs Custom Terraform Tasks)
# Extension: ms-devlabs.custom-terraform-tasks
# Purpose: Installs specified version of Terraform CLI with consistent parameter naming
#
# Usage Examples:
#   - template: ../tasks/terraform_installer.yml
#     parameters:
#       TerraformVersion: 'latest'
#
#   - template: ../tasks/terraform_installer.yml
#     parameters:
#       TerraformVersion: '1.5.0'
#
#   - template: ../tasks/terraform_installer.yml
#     parameters:
#       TerraformVersion: '1.5.x'  # Latest patch in 1.5 series
#
# Known Issues:
# - Requires the ms-devlabs.custom-terraform-tasks extension to be installed in Azure DevOps
# - Version ranges (e.g., '>=1.10.0') support may vary by extension version

parameters:
  - name: TerraformVersion
    type: string
    displayName: 'Terraform version to install'
    default: 'latest'
    # Supports:
    # - 'latest' - Install latest stable version
    # - Specific version: '1.11.3', '1.10.5'
    # - Semantic version: '1.11.x' (latest patch in 1.11)
    # - Version range: '>=1.10.0' (1.10.0 or higher)

steps:
  - task: TerraformInstaller@1
    displayName: 'Install Terraform CLI: ${{ parameters.TerraformVersion }}'
    name: TerraformInstall
    inputs:
      terraformVersion: '${{ parameters.TerraformVersion }}'
