# yaml-language-server: $schema=https://raw.githubusercontent.com/microsoft/azure-pipelines-vscode/master/service-schema.json
# yaml-language-server: $schema=https://json.schemastore.org/yamllint.json

trigger:
  branches:
    include:
      - experiment/*
  paths:
    include:
      - tests/pipelines/experimental_pipelines/*

jobs:
  - job:
    pool: 'Mare Nectaris'
    variables:
      TestVariable: BrickByBrick
      RepositoryCheckoutPath: $(Build.Repository.Name)
      TerraformWorkingDirectory: $(Pipeline.Workspace)/$(RepositoryCheckoutPath)/tests/pipelines/experimental_pipelines/detect_changes/test_terraform
    steps:
      - checkout: self
        displayName: 'Checkout self repository'
        path: $(RepositoryCheckoutPath)

      - template: ../../../../tasks/azure_powershell.yml
        parameters:
          AzureSubscription: Pipeline-CloudDisco
          ScriptType: InlineScript
          Inline: Get-ChildItems
